define([],function(){"use strict"
var t=Backbone.View.extend({allowedKeys:null,minInput:null,maxInput:null,isValidMove:!1,allowMinus:null,inputLastVal:null,initialize:function(t){var i=t.option
this.allowedKeys=i.allowedKeys,this.minInput=i.minInput,this.maxInput=i.maxInput,this.allowMinus=i.allowMinus,this.onlyPositiveDecimal=i.onlyPositiveDecimal,this.inputLastVal=i.inputLastVal,this.allowMinus?this.$el.on("keyup",_.bind(this._allowMinus,this)):this._isNexus()?this.$el.on("keyup",_.bind(this._checkNumericInputOnKeyUp,this)):this.$el.on("keypress",_.bind(this._limitInput,this)).on("keydown",_.bind(this._onKeyDown,this)),this.$el.on("paste",_.bind(this._preventInputPaste,this)).on("focusout",_.bind(this._validateValue,this))},_preventInputPaste:function(t){t.preventDefault()},_allowMinus:function(t){var i=$(t.target),n=i.val(),e=this.onlyPositiveDecimal?/^\d*(\.\d*)?$/:/^\-?\d*(\.\d*)?$/
return""===n||"-"===n?void i.attr("data-value",this.inputLastVal):void(e.test(n)?this.inputLastVal=n:i.val(this.inputLastVal))},_checkNumericInputOnKeyUp:function(i){var n=$(i.target),e=i.which||i.keyCode||i.charCode,a=n.val(),l=/^[0-9]+$/,s=this.maxInput,u=this.minInput,o=t.CODE
return""===a||l.test(a)&&a.length-a.replace(/\./g,"").length<=1&&a.length-a.replace(/\-/g,"").length<=1&&a.indexOf("-")<=0?(e===o.ENTER_KEY?a>s?(this.inputLastVal=s,n.val(this.inputLastVal)):u>a?(this.inputLastVal=u,n.val(this.inputLastVal)):this.inputLastVal=a:this.inputLastVal=a,!0):void n.val(this.inputLastVal)},_isNexus:function(){return"Linux armv7l"===navigator.platform},_validateValue:function(t){var i=this.maxInput,n=this.minInput,e=$(t.target),a=e.val()
n>a?e.val(n):a>i&&e.val(i),""===a&&this.trigger("empty-textbox-field-value"),t.preventDefault()},_limitInput:function(i){var n=i.keyCode||i.charCode,e=t.CODE
return!this.isValidMove&&n!==e.BACKSPACE_KEY&&n!==e.ENTER_KEY&&(n<e.ZERO_KEY||n>e.NINE_KEY)?!1:void(n===e.ENTER_KEY&&this._validateValue(i))},_onKeyDown:function(i){var n=i.keyCode,e=t.CODE
this.isValidMove=-1!==[e.DELETE_KEY,e.LEFT_ARROW_KEY,e.UP_ARROW_KEY,e.RIGHT_ARROW_KEY,e.DOWN_ARROW_KEY].indexOf(n)}},{CODE:{LEFT_ARROW_KEY:37,RIGHT_ARROW_KEY:39,UP_ARROW_KEY:38,DOWN_ARROW_KEY:40,BACKSPACE_KEY:8,ENTER_KEY:13,DELETE_KEY:46,ZERO_KEY:48,NINE_KEY:57}})
return t})
