define(["constants","lang-json"],function(e,t){var n=Backbone.Model.extend({initialize:function(){this.constants=new e,this.langJson=t,this.gridOptions={canvasWidth:this.constants.DEFAULT_CANVAS_WIDTH,canvasHeight:this.constants.DEFAULT_CANVAS_HEIGHT,containerId:"plg-grapher-control",gridLimits:{xLower:this.constants.DEFAULT_GRID_X_LOWER_LIMIT,xUpper:this.constants.DEFAULT_GRID_X_UPPER_LIMIT,yLower:this.constants.DEFAULT_GRID_Y_LOWER_LIMIT,yUpper:this.constants.DEFAULT_GRID_Y_UPPER_LIMIT},xInterval:this.constants.DEFAULT_X_INTERVAL,yInterval:this.constants.DEFAULT_Y_INTERVAL,mainModel:this},this.selectedLine=null,this.idSelectedModelObj=this.constants.OBJ_ROCKET-1,this.factorXScale=1,this.factorYScale=1,this.idSelectedEqPanel=this.constants.ONE_EQ_PANEL,this.xAxisLabel="",this.yAxisLabel="",this.xUpClicks=1,this.yUpClicks=1,this.xLimitCounter=0,this.yLimitCounter=0,this.oneLimitCounter=0,this.sliderValue=1,this.oCoordLabel=null,this.EqPanelData={one:{bIsEnable:!0,color:this.constants.COLOR_ONE,idEquationPanel:"one",idSelectedLine:"line1",sliderPoint:null,title:"Linear Piecewise",lineCounter:1,xhigh:5,yhigh:5,xlow:0,ylow:0,xSliderPointPos:1,ySliderPointPos:1,lineData:{line1:{x1:0,y1:0,x2:5,y2:5,idInterceptType:this.constants.SLOPE_INTERCEPT,xRangeLeftRelation:this.constants.LESS_THAN_OR_EQUAL,xRangeRightRelation:this.constants.LESS_THAN,bIsSelected:!0,lineTypeId:this.constants.SEGMENT,slope:this.constants.DEFAULT_SLOPE,displacement:this.constants.DEFAULT_DISPLACEMENT,expressionSlopeIntercept:this.getSlopeInterceptExp(this.constants.DEFAULT_LINE_DATA),expressionPointSlope:this.getPointSlopeExp(this.constants.DEFAULT_LINE_DATA),sliderPoint:null,graphLine:null}}},two:{bIsEnable:!1,color:this.constants.COLOR_TWO,idEquationPanel:"two",idSelectedLine:"line1",sliderPoint:null,title:"Linear Piecewise",lineCounter:1,xhigh:5,yhigh:5,xlow:0,ylow:0,xSliderPointPos:1,ySliderPointPos:1,lineData:{line1:{x1:0,y1:0,x2:5,y2:5,idInterceptType:this.constants.SLOPE_INTERCEPT,xRangeLeftRelation:this.constants.LESS_THAN_OR_EQUAL,xRangeRightRelation:this.constants.LESS_THAN,bIsSelected:!0,lineTypeId:this.constants.SEGMENT,slope:this.constants.DEFAULT_SLOPE,displacement:this.constants.DEFAULT_DISPLACEMENT,expressionSlopeIntercept:this.getSlopeInterceptExp(this.constants.DEFAULT_LINE_DATA),expressionPointSlope:this.getPointSlopeExp(this.constants.DEFAULT_LINE_DATA),sliderPoint:null,graphLine:null}}},three:{bIsEnable:!1,color:this.constants.COLOR_THREE,idEquationPanel:"three",idSelectedLine:"line1",sliderPoint:null,title:"Linear Piecewise",lineCounter:1,xhigh:5,yhigh:5,xlow:0,ylow:0,xSliderPointPos:1,ySliderPointPos:1,lineData:{line1:{x1:0,y1:0,x2:5,y2:5,idInterceptType:this.constants.SLOPE_INTERCEPT,xRangeLeftRelation:this.constants.LESS_THAN_OR_EQUAL,xRangeRightRelation:this.constants.LESS_THAN,bIsSelected:!0,lineTypeId:this.constants.SEGMENT,slope:this.constants.DEFAULT_SLOPE,displacement:this.constants.DEFAULT_DISPLACEMENT,expressionSlopeIntercept:this.getSlopeInterceptExp(this.constants.DEFAULT_LINE_DATA),expressionPointSlope:this.getPointSlopeExp(this.constants.DEFAULT_LINE_DATA),sliderPoint:null,graphLine:null}}},four:{bIsEnable:!1,color:this.constants.COLOR_FOUR,idEquationPanel:"four",idSelectedLine:"line1",sliderPoint:null,title:"Linear Piecewise",lineCounter:1,xhigh:5,yhigh:5,xlow:0,ylow:0,xSliderPointPos:1,ySliderPointPos:1,lineData:{line1:{x1:0,y1:0,x2:5,y2:5,idInterceptType:this.constants.SLOPE_INTERCEPT,xRangeLeftRelation:this.constants.LESS_THAN_OR_EQUAL,xRangeRightRelation:this.constants.LESS_THAN,bIsSelected:!0,lineTypeId:this.constants.SEGMENT,slope:this.constants.DEFAULT_SLOPE,displacement:this.constants.DEFAULT_DISPLACEMENT,expressionSlopeIntercept:this.getSlopeInterceptExp(this.constants.DEFAULT_LINE_DATA),expressionPointSlope:this.getPointSlopeExp(this.constants.DEFAULT_LINE_DATA),sliderPoint:null,graphLine:null}}}}},updateGraphCoord:function(e,t){this.gridOptions.canvasWidth=t,this.gridOptions.canvasHeight=e},getSlopeInterceptExp:function(e){var t="",n=" &lt; ",i=" &lt; ",a=e.x1.safe_toFixed(1),s=e.x2.safe_toFixed(1)
e.xRangeLeftRelation===this.constants.LESS_THAN_OR_EQUAL&&(n=" &#8804; "),e.xRangeRightRelation===this.constants.LESS_THAN_OR_EQUAL&&(i=" &#8804; ")
var l=e.slope
l=l.safe_toFixed(2)
var o=e.displacement
return o=o.safe_toFixed(1),e.lineTypeId===this.constants.NEG_INFINITY_RAY?a=this.langJson.NegInfinityText:e.lineTypeId===this.constants.POS_INFINITY_RAY&&(s=this.langJson.InfinityText),t=l+" x + "+o+" for "+a+n+"x"+i+s},getPointSlopeExp:function(e){var t="",n="&lt;",i="&lt;",a=e.x1.safe_toFixed(1),s=e.x2.safe_toFixed(1),l=e.x1.safe_toFixed(1),o=e.y1.safe_toFixed(1)
e.xRangeLeftRelation===this.constants.LESS_THAN_OR_EQUAL&&(n=" &#8804; "),e.xRangeRightRelation===this.constants.LESS_THAN_OR_EQUAL&&(i=" &#8804; ")
var h=e.slope
return h=h.safe_toFixed(2),e.lineTypeId===this.constants.NEG_INFINITY_RAY?(a=this.langJson.NegInfinityText,l=e.x2,o=e.y2):e.lineTypeId===this.constants.POS_INFINITY_RAY&&(s=this.langJson.InfinityText),t=h+" (x - "+l+") + "+o+" for "+a+n+"x"+i+s},getSlope:function(e){return e.x2-e.x1===0?0:Number(((e.y2-e.y1)/(e.x2-e.x1)).toFixed(2))},getIntercept:function(e){return Number((e.y1-e.x1*e.slope).toFixed(1))},AddLine:function(e){this.EqPanelData[this.idSelectedEqPanel].lineCounter++
var t="line"+this.EqPanelData[this.idSelectedEqPanel].lineCounter
e.bIsSelected=!0,e.expressionSlopeIntercept=this.getSlopeInterceptExp(e),e.expressionPointSlope=this.getPointSlopeExp(e),this.EqPanelData[this.idSelectedEqPanel].idSelectedLine!==this.constants.INVALID_VALUE&&(this.EqPanelData[this.idSelectedEqPanel].lineData[this.EqPanelData[this.idSelectedEqPanel].idSelectedLine].bIsSelected=!1),this.EqPanelData[this.idSelectedEqPanel].idSelectedLine=t,this.EqPanelData[this.idSelectedEqPanel].lineData[t]=e,this.EqPanelData[this.idSelectedEqPanel].xlow>e.x1&&(this.EqPanelData[this.idSelectedEqPanel].xlow=e.x1),this.EqPanelData[this.idSelectedEqPanel].ylow>e.y1&&(this.EqPanelData[this.idSelectedEqPanel].ylow=e.y1),this.EqPanelData[this.idSelectedEqPanel].xhigh<e.x2&&(this.EqPanelData[this.idSelectedEqPanel].xhigh=e.x2),this.EqPanelData[this.idSelectedEqPanel].yhigh<e.y2&&(this.EqPanelData[this.idSelectedEqPanel].yhigh=e.y2),this.trigger("onLineAdded",this.idSelectedEqPanel,t),this.trigger("OnLineDatachange",{affectedEqPanelId:this.idSelectedEqPanel}),this.trigger("setSliderToolTip",{affectedEqPanelId:this.idSelectedEqPanel})},AddLineSegment:function(){if(this.idSelectedEqPanel!==this.constants.INVALID_VALUE){var e=$.extend({},this.constants.DEFAULT_LINE_DATA)
if(this.EqPanelData[this.idSelectedEqPanel].idSelectedLine!=this.constants.INVALID_VALUE){var t=this.EqPanelData[this.idSelectedEqPanel].lineData[this.EqPanelData[this.idSelectedEqPanel].idSelectedLine]
t.lineTypeId===this.constants.SEGMENT||t.lineTypeId===this.constants.NEG_INFINITY_RAY?(e.x1=t.x2,e.y1=t.y2,e.x2=e.x1+this.gridOptions.xInterval,e.y2=e.y1+this.gridOptions.yInterval):t.lineTypeId===this.constants.POS_INFINITY_RAY&&(e.x2=t.x1,e.y2=t.y1,e.x1=e.x2-this.gridOptions.xInterval,e.y1=e.y2-this.gridOptions.yInterval)}else e.x2=e.x1+this.gridOptions.xInterval,e.y2=e.y1+this.gridOptions.yInterval
e.slope=this.getSlope(e),e.displacement=this.getIntercept(e),this.AddLine(e)}},AddPositiveInfinityRay:function(){if(this.idSelectedEqPanel!==this.constants.INVALID_VALUE){var e,t,n=$.extend({},this.constants.DEFAULT_LINE_DATA),i=this.gridOptions
this.EqPanelData[this.idSelectedEqPanel].idSelectedLine!=this.constants.INVALID_VALUE?(e=this.EqPanelData[this.idSelectedEqPanel].lineData[this.EqPanelData[this.idSelectedEqPanel].idSelectedLine],e.lineTypeId===this.constants.SEGMENT||e.lineTypeId===this.constants.NEG_INFINITY_RAY?(n.x1=e.x2,n.y1=e.y2):e.lineTypeId===this.constants.POS_INFINITY_RAY&&(n.x1=e.x1,n.y1=e.y1)):(n.x1=this.constants.DEFAULT_X1,n.y1=this.constants.DEFAULT_Y1),n.slope=i.yInterval/i.xInterval,n.displacement=Number((n.y1-n.slope*n.x1).toFixed(1)),t=this.getHighGraphPointFromSlope(n.slope,n.displacement),n.x2=t.x,n.y2=t.y,n.lineTypeId=this.constants.POS_INFINITY_RAY,this.AddLine(n)}},AddNegativeInfinityRay:function(){if(this.idSelectedEqPanel!==this.constants.INVALID_VALUE){var e,t,n=$.extend({},this.constants.DEFAULT_LINE_DATA),i=this.gridOptions
this.EqPanelData[this.idSelectedEqPanel].idSelectedLine!=this.constants.INVALID_VALUE?(e=this.EqPanelData[this.idSelectedEqPanel].lineData[this.EqPanelData[this.idSelectedEqPanel].idSelectedLine],e.lineTypeId===this.constants.SEGMENT||e.lineTypeId===this.constants.POS_INFINITY_RAY?(n.x2=e.x1,n.y2=e.y1):e.lineTypeId===this.constants.NEG_INFINITY_RAY&&(n.x2=e.x2,n.y2=e.y2)):(n.x2=this.constants.DEFAULT_X1,n.y2=this.constants.DEFAULT_Y1),n.slope=i.yInterval/i.xInterval,n.displacement=Number((n.y2-n.slope*n.x2).toFixed(1)),t=this.getLowGraphPointFromSlope(n.slope,n.displacement),n.x1=t.x,n.y1=t.y,n.lineTypeId=this.constants.NEG_INFINITY_RAY,this.AddLine(n)}},DeleteLine:function(e){var t,n=this.EqPanelData[e.EqPanelId].lineData[e.LineId].graphLine,i=n.gridGraphView
n["delete"](),this.selectedLine===n&&(this.selectedLine=null),delete this.EqPanelData[e.EqPanelId].lineData[e.LineId],this.EqPanelData[e.EqPanelId].idSelectedLine=this.constants.INVALID_VALUE,this.EqPanelData[e.EqPanelId].xhigh=0,this.EqPanelData[e.EqPanelId].yhigh=0,t=Object.keys(this.EqPanelData[e.EqPanelId].lineData),t.length>0&&(null===this.selectedLine?this.EqPanelData[e.EqPanelId].idSelectedLine=t[t.length-1]:this.EqPanelData[e.EqPanelId].idSelectedLine=this.selectedLine.lineId),this.UpdateLowHigh(e),this.EqPanelData[e.EqPanelId].idSelectedLine!=this.constants.INVALID_VALUE&&(this.EqPanelData[e.EqPanelId].lineData[this.EqPanelData[e.EqPanelId].idSelectedLine].bIsSelected=!0),i._refreshGridGraph()},UpdateLowHigh:function(e){var t=null
for(t in this.EqPanelData[e.EqPanelId].lineData)this.EqPanelData[e.EqPanelId].xhigh<this.EqPanelData[e.EqPanelId].lineData[t].x2&&(this.EqPanelData[e.EqPanelId].xhigh=this.EqPanelData[e.EqPanelId].lineData[t].x2),this.EqPanelData[e.EqPanelId].yhigh<this.EqPanelData[e.EqPanelId].lineData[t].y2&&(this.EqPanelData[e.EqPanelId].yhigh=this.EqPanelData[e.EqPanelId].lineData[t].y2),this.EqPanelData[e.EqPanelId].xlow>this.EqPanelData[e.EqPanelId].lineData[t].x1&&(this.EqPanelData[e.EqPanelId].xlow=this.EqPanelData[e.EqPanelId].lineData[t].x1),this.EqPanelData[e.EqPanelId].ylow>this.EqPanelData[e.EqPanelId].lineData[t].y1&&(this.EqPanelData[e.EqPanelId].ylow=this.EqPanelData[e.EqPanelId].lineData[t].y1)},ChangeLineSelection:function(e){this.EqPanelData[e.EqPanelId].lineData[this.EqPanelData[e.EqPanelId].idSelectedLine].bIsSelected=!1,this.EqPanelData[e.EqPanelId].idSelectedLine=e.LineId,this.EqPanelData[e.EqPanelId].lineData[this.EqPanelData[e.EqPanelId].idSelectedLine].bIsSelected=!0},SetEqPanelSelected:function(e){var t,n,i
e.EqPanelId!==this.idSelectedEqPanel&&(this.idSelectedEqPanel!==this.constants.INVALID_VALUE&&this.idSelectedEqPanel!==e.EqPanelId&&this.trigger("onDeselectingEquationPanel",{eqPanelId:this.idSelectedEqPanel}),this.idSelectedEqPanel=e.EqPanelId,this.trigger("onSelectingEquationPanel",{eqPanelId:this.idSelectedEqPanel})),t=this.EqPanelData[this.idSelectedEqPanel],n=t.idSelectedLine,-1!==n&&(i=t.lineData[n].graphLine),null!==this.selectedLine&&i!==this.selectedLine&&this.selectedLine.deselectLine(),-1!==n&&i&&this.selectedLine!==i&&i.selectLine(),this.trigger("OnLineDatachange",{affectedEqPanelId:e.EqPanelId}),this.trigger("setSliderToolTip",{affectedEqPanelId:e.EqPanelId}),this.trigger("updateAccText",{affectedEqPanelId:e.EqPanelId})},ToggleEnableStatus:function(e){this.EqPanelData[e.EqPanelId].bIsEnable===!0?this.EqPanelData[e.EqPanelId].bIsEnable=!1:(this.EqPanelData[e.EqPanelId].bIsEnable=!0,this.idSelectedEqPanel=e.EqPanelId)},ChangeTextData:function(e){this.EqPanelData[e.EqPanelId].title=e.ChangeText},EquationExpressionChange:function(e){var t=this.EqPanelData[e.affectedExpData.EqPanelId].lineData[e.affectedExpData.LineId],n=t.slope,i=t.x1,a=t.x2,s=t.y1,l=t.y2,o=t.displacement
if("SIspinnerSlope"===e.expType||"PSspinnerSlope"===e.expType){if(t.slope=e.curValue,n=e.curValue,t.lineTypeId===this.constants.SEGMENT)t.y2=n*(a-i)+s,t.displacement=s-n*i
else if(t.lineTypeId===this.constants.POS_INFINITY_RAY){o=t.displacement=s-n*i
var h=this.getHighGraphPointFromSlope(n,o)
t.x2=h.x,t.y2=h.y}else if(t.lineTypeId===this.constants.NEG_INFINITY_RAY){o=t.displacement=l-n*a
var r=this.getLowGraphPointFromSlope(n,o)
t.x1=r.x,t.y1=r.y}}else"SIspinnerDisplacement"===e.expType?(t.displacement=e.curValue,o=e.curValue,t.lineTypeId===this.constants.SEGMENT?(s=t.y1=n*i+o,t.y2=n*a+o,t.slope=this.getSlope(t)):t.lineTypeId===this.constants.POS_INFINITY_RAY?(t.y1=n*i+o,t.y2=n*a+o):t.lineTypeId===this.constants.NEG_INFINITY_RAY&&(t.y1=n*i+o,t.y2=n*a+o)):"SIspinnerX1"===e.expType||"PSspinnerX1B"===e.expType?(t.lineTypeId===this.constants.SEGMENT&&e.curValue>=a&&(e.curValue=i),t.x1=e.curValue,i=e.curValue,t.y1=n*i+o):"PSspinnerX1A"===e.expType?t.lineTypeId===this.constants.SEGMENT||t.lineTypeId===this.constants.POS_INFINITY_RAY?(t.lineTypeId===this.constants.SEGMENT&&e.curValue>=a&&(e.curValue=i),t.x1=e.curValue,t.x2+=e.curValue-i,i=e.curValue):(t.x2=e.curValue,t.x1+=e.curValue-a,a=e.curValue):"SIspinnerX2"===e.expType||"PSspinnerX2"===e.expType?(t.lineTypeId===this.constants.SEGMENT&&e.curValue<=i&&(e.curValue=a),t.x2=e.curValue,a=e.curValue,t.y2=n*a+o):"PSspinnerY1"===e.expType&&(t.y1=e.curValue,s=e.curValue,t.displacement=s-n*i,o=t.displacement,t.y2=n*a+o,t.lineTypeId===this.constants.SEGMENT||t.lineTypeId===this.constants.POS_INFINITY_RAY?(t.y1=e.curValue,t.lineTypeId===this.constants.SEGMENT&&e.curValue>=l&&(e.curValue=s),t.y2+=e.curValue-s,s=e.curValue):(t.y2=e.curValue,t.displacement+=e.curValue-l,l=e.curValue))
t.expressionSlopeIntercept=this.getSlopeInterceptExp(t),t.expressionPointSlope=this.getPointSlopeExp(t),this.UpdateLowHigh({EqPanelId:e.affectedExpData.EqPanelId}),this.trigger("onExpressionDataChanged",t),this.trigger("OnLineDatachange",{affectedEqPanelId:e.affectedExpData.EqPanelId}),this.trigger("setSliderToolTip",{affectedEqPanelId:e.affectedExpData.EqPanelId})},getHighGraphPointFromSlope:function(e,t){var n=this.gridOptions.gridLimits,i=n.xUpper,a=e*i+t
return{x:i,y:a}},getLowGraphPointFromSlope:function(e,t){var n=this.gridOptions.gridLimits,i=n.xLower,a=e*i+t
return{x:i,y:a}},ShowNextImage:function(){this.idSelectedModelObj+=1,this.idSelectedModelObj>4&&(this.idSelectedModelObj=0),this.trigger("OnModelObjectChange",{})},ShowPreviousImage:function(){this.idSelectedModelObj-=1,this.idSelectedModelObj<0&&(this.idSelectedModelObj=4),this.trigger("OnModelObjectChange",{})},ChangeInterceptType:function(e){this.EqPanelData[e.affectedExpData.EqPanelId].lineData[e.affectedExpData.LineId].idInterceptType=e.ChangedInterceptType,this.trigger("OnLineDatachange",{affectedEqPanelId:e.affectedExpData.EqPanelId})},ChangeToggleLeftRange:function(e){var t=this.EqPanelData[e.affectedExpData.EqPanelId].lineData[e.affectedExpData.LineId]
t.xRangeLeftRelation=e.ChangedToggleLeftRangeType,t.expressionSlopeIntercept=this.getSlopeInterceptExp(t),t.expressionPointSlope=this.getPointSlopeExp(t),this.trigger("OnLineDatachange",{affectedEqPanelId:e.affectedExpData.EqPanelId}),t.graphLine.updateSourcePointStyle(t)},CheckToggleRightRange:function(e){var t=this.EqPanelData[e.affectedExpData.EqPanelId].lineData[e.affectedExpData.LineId]
t.xRangeRightRelation=e.ChangedToggleRightRangeType,t.expressionSlopeIntercept=this.getSlopeInterceptExp(t),t.expressionPointSlope=this.getPointSlopeExp(t),this.trigger("OnLineDatachange",{affectedEqPanelId:e.affectedExpData.EqPanelId}),t.graphLine.updateSourcePointStyle(t)},PopupVisibilityChange:function(e){this.trigger("OnPopupVisibilityChange",{bIsVisible:e.bIsVisible,popupName:e.popupName,affectedExpData:e.affectedExpData})},AxesLabelChange:function(){this.trigger("OnAxesLabelChange")},AddSliderPointOnLine:function(e,t){this.SetSliderPointData(e,"one",t),this.SetSliderPointData(e,"two",t),this.SetSliderPointData(e,"three",t),this.SetSliderPointData(e,"four",t)},containsPointX:function(e,t){var n,i,a
switch(e.lineTypeId){case 1:n=e.x1,i=e.x2
break
case 2:n=e.x1,i=Number.POSITIVE_INFINITY
break
case 3:n=Number.NEGATIVE_INFINITY,i=e.x2}switch(a=e.xRangeLeftRelation.toString()+e.xRangeRightRelation.toString()){case"22":return i>=n&&t>n&&i>t||n>=i&&t>i&&n>t
case"21":return i>=n&&t>n&&i>=t||n>=i&&t>=i&&n>t
case"12":return i>=n&&t>=n&&i>t||n>=i&&t>i&&n>=t
case"11":return i>=n&&t>=n&&i>=t||n>=i&&t>=i&&n>=t}},isOneToMany:function(e,t){var n=this.EqPanelData[t],i=n.lineData,a=null,s=e.xPos,l=null,o=[],h={oneToMany:!1,isColliding:!1,lineId:null}
$(".plg-obj-oval-background."+t)
for(a in i)if(this.containsPointX(i[a],s)){if(l=Number((i[a].slope*s+i[a].displacement).toFixed(1)),1===o.length){h.oneToMany=!0,h.lineId=null
break}o.push(l),h.lineId=a}return!h.oneToMany&&h.lineId&&(h.isColliding=!0),h},SetSliderPointData:function(e,t,n){var i,a,s=this.EqPanelData[t],l=s.lineData,o=null,h=e.xPos,r=null,d=$(".plg-obj-oval-background."+t),c=this.EqPanelData[t].bIsEnable
this.sliderValue=e.xPos,a=this.isOneToMany(e,t),o=a.lineId,n&&a.oneToMany&&c?this.trigger("OnMultipleYValuesForOneXValue"):a.isColliding&&c?(r=l[o].slope*h+l[o].displacement,s.xSliderPointPos=h,s.ySliderPointPos=r,i=s.sliderPoint.gridGraphView.model.convertToCanvasCoordinates({x:h,y:r}),s.sliderPoint.shapeObject.shape.x=i.x,s.sliderPoint.shapeObject.shape.y=i.y,i.y>0&&i.y<this.gridOptions.canvasHeight?d.show().css("top",i.y-29+"px"):d.hide(),s.oCoordLabel.text="("+h.safe_toFixed(1)+", "+r.safe_toFixed(1)+")",s.oCoordLabel.visible=!0,s.oCoordLabel.position=new PIXI.Point(i.x+s.oCoordLabel.width/3,i.y-s.oCoordLabel.height/2),n&&t===this.idSelectedEqPanel&&l[o].graphLine!==this.selectedLine&&l[o].graphLine.selectLine(),s.sliderPoint.changeObjectVisibility(!0)):(d.hide(),s.oCoordLabel.visible=!1,s.sliderPoint.changeObjectVisibility(!1)),null!==o&&this.trigger("changeEquationSelection",{affectedEqPanelId:t,idSelectedLine:n?o:s.idSelectedLine})},scaleGraph:function(e){var t=this.gridOptions,n=t.gridLimits
switch(e){case"XPlus":if(this.xLimitCounter>14)return
0===this.xUpClicks&&(5==t.xInterval?t.xInterval=2:2==t.xInterval?t.xInterval=1:t.xInterval/=2,n.xUpper=9*t.xInterval,n.xLower=-t.xInterval),this.xUpClicks+=1,this.xLimitCounter++,this.xUpClicks%5==0&&t.xInterval>1&&(5==t.xInterval?t.xInterval=2:2==t.xInterval?t.xInterval=1:t.xInterval/=2,this.xUpClicks=1,n.xUpper=9*t.xInterval,n.xLower=-t.xInterval),1==t.xInterval&&(this.oneLimitCounter+=1),0!==this.xUpClicks&&(n.xUpper-=t.xInterval,n.xLower=-(n.xUpper-n.xLower)/this.constants.DEFAULT_DIFF_X)
break
case"XMinus":if(this.xLimitCounter<-14)return
0===this.xUpClicks&&(1==t.xInterval?t.xInterval=2:2==t.xInterval?t.xInterval=5:t.xInterval*=2,n.xUpper=5*t.xInterval,n.xLower=-t.xInterval),this.xUpClicks-=1,this.xLimitCounter--,this.xUpClicks%5==0&&t.xInterval>1&&(1==t.xInterval?t.xInterval=2:2==t.xInterval?t.xInterval=5:t.xInterval*=2,this.xUpClicks=-1,n.xUpper=5*t.xInterval,n.xLower=-t.xInterval),1==t.xInterval&&(this.oneLimitCounter-=1),1==t.xInterval&&this.oneLimitCounter<1&&(t.xInterval=2,this.xUpClicks=-1),0!==this.xUpClicks&&(n.xUpper+=t.xInterval),n.xLower=-(n.xUpper-n.xLower)/this.constants.DEFAULT_DIFF_X
break
case"resetX":n.xUpper=this.constants.DEFAULT_GRID_X_UPPER_LIMIT,n.xLower=-5,this.xUpClicks=1,this.xLimitCounter=0,t.xInterval=this.constants.DEFAULT_X_INTERVAL
break
case"YPlus":if(this.yLimitCounter>15)return
0===this.yUpClicks&&(5==t.yInterval?t.yInterval=2:2==t.yInterval?t.yInterval=1:t.yInterval/=2,n.yUpper=9*t.yInterval,n.yLower=-t.yInterval),this.yUpClicks+=1,this.yLimitCounter++,this.yUpClicks%5==0&&t.yInterval>1&&(5==t.yInterval?t.yInterval=2:2==t.yInterval?t.yInterval=1:t.yInterval/=2,n.yUpper=9*t.yInterval,n.yLower=-t.yInterval,this.yUpClicks=1),1==t.yInterval&&(this.oneLimitCounter+=1),0!==this.yUpClicks&&(n.yUpper-=t.yInterval,n.yLower=-(n.yUpper-n.yLower)/this.constants.DEFAULT_DIFF_Y)
break
case"YMinus":if(this.yLimitCounter<-15)return
0===this.yUpClicks&&(1==t.yInterval?t.yInterval=2:2==t.yInterval?t.yInterval=5:t.yInterval*=2,n.yUpper=5*t.yInterval,n.yLower=-t.yInterval),this.yUpClicks-=1,this.yLimitCounter--,this.yUpClicks%5==0&&t.yInterval>1&&(1==t.yInterval?t.yInterval=2:2==t.yInterval?t.yInterval=5:t.yInterval*=2,n.yUpper=5*t.yInterval,n.yLower=-t.yInterval,this.yUpClicks=-1),1==t.yInterval&&(this.oneLimitCounter-=1),1==t.yInterval&&this.oneLimitCounter<1&&(t.yInterval=2,this.yUpClicks=-1),0!=this.yUpClicks&&(n.yUpper+=t.yInterval),n.yLower=-(n.yUpper-n.yLower)/this.constants.DEFAULT_DIFF_Y
break
case"resetY":n.yUpper=this.constants.DEFAULT_GRID_Y_UPPER_LIMIT,this.yUpClicks=1,n.yLower=-5,this.yLimitCounter=0,t.yInterval=this.constants.DEFAULT_Y_INTERVAL}this.trigger("OnGraphScale"),this.trigger("OnGridOptionsChange",!0)}})
return n})
